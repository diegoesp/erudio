<% content_for :head do %>
<script type="text/javascript">

	// 
	// ON DOM READY
	//
	// Init logic after page 'loading'
	//
	$(document).ready(function() {
		
		// Render the activities (featured activities and all activities).
		var template = _.template($("#activityTemplate")[0].text, {
			data : app.home.featuredActivities,
			featured : true
		});
		$("#featuredActivitiesContainer").html(template);
	
		var template = _.template($("#activityTemplate")[0].text, {
			data : app.home.allActivities,
			featured : false
		});
		$("#allActivitiesContainer").html(template);
	
		// Initialize the Wizard component
		app.home.wizard.initialize();
		
		
		// Load the next button from the wizard
		app.home.activitiesContext.activitiesWizardNextButton = $("#activitiesWizardNextButton");
	});


</script>
<% end %>


<div id="pageSection">
	<!-- Debugging box -->
	<div id="debuggingBox">
		<label style="color: white;">Debugging Box</label> </br> <a onclick="app.home.alertSearchTerm();">Search Term to JSON</a> </br> <a onclick="app.home.wizard.back();">Previous</a> &nbsp;|&nbsp; <a onclick="app.home.wizard.next();">Next</a> </br> <a href="<%= url_for(:action => 'result', :controller => 'pages') %>">Result Page</a> </br></br> <a onclick="postSearch();">Post Search</a> </br>
	</div>
	
	<div id="topErudioLogoContainer">
		<div id="topErudioLogo"></div>
	</div>
	
	<div id="pageTopFrame"></div>
	<div id="headerSection">
		<div id="authenticationBox"></div>
	</div>
	
	<div id="welcomeSection">
		<img id="slogan" src="/assets/slogan.png"/>
	</div>
	
	<div id="selectTeacherLabelImageWrapper">
		<img id="selectTeacherLabelImage" src="/assets/que_profesores_label.png"></image>
	</div>
	
	<!-- Wizard and Actions Section -->
	<div id="searchWizardSection">
		<!-- Slider with effects -->
		<div id="wizardSliderWrapper">
			<div id="wizardSlider">
				
				<!-- Activities Section -->
				<div class="slideBox" id="slideBox1">
					<div id="activitiesSection">
						<div id="featuredActivitiesContainerWrapper" class="">
							<div id="featuredActivitiesContainer">
								<!-- ACTIVITIES TEMPLATE WILL BE RENDERED HERE -->
							</div>
						</div>
						<div id="allActivitiesContainerWrapper" class="allActivitiesContainerWrapperHide">
							<div id="allActivitiesContainer">
								<!-- ACTIVITIES TEMPLATE WILL BE RENDERED HERE -->
							</div>
						</div>
					</div>
					
					<div id="activitiesWizardNextButton" class="wizardNextButton wizardNextButtonDisabled"></div>
					
					<div id="seeMoreActivitiesWrapper">
						<div id="seeMoreActivities" class="seeMore" onclick="app.home.seeMoreActivities(this);"></div>
					</div>				
				</div>
				
				<div class="slideBox" id="slideBox2">
					BOX 2
				</div>
				
				<div class="slideBox" id="slideBox3">
					BOX 3
				</div>
			</div>
		</div>
	</div>
	
	<div id="howItWorksSection">
		How it works
	</div>
	
	<div id="footerSection">
		Footer
	</div>

</div>

<script type="text/javascript">

	_.templateSettings = {
	evaluate:/\{\[([\s\S]+?)\]\}/g,
	interpolate:/\{\{([\s\S]+?)\}\}/g
	};

	app.home.featuredActivities =<%= @json_featured_activities.html_safe%>;
	app.home.allActivities = <%= @json_all_activities.html_safe%>;</script>

	<!-- ACTIVITIES TEMPLATE -->
	<script id="activityTemplate" type="text/template">
		{[ _.each(data, function(activity) { ]}
	
			<div class="{{featured === true ? "featuredActivityContainer" : "allActivityContainer"}}">
				<div class="activityBox activityBox_{{activity.id}}" onclick="app.home.selectActivity(this, {{featured}});">
					<span>{{ activity.name }}</span>
					<input type="hidden" name="activityId" id="{{featured === true ? 'featured_' : ''}}activityId_{{activity.id}}" value="{{activity.id}}"/>
				</div>
			</div>
		{[ }); ]}
	</script>
